(()=>{"use strict";var e;!function(e){e.searchButton=".search-wrapper__button",e.searchInput=".search-wrapper__input",e.mainWrapper=".main-wrapper",e.iFrame="#main-wrapper__iframe",e.toast=".toast",e.backHomeButton=".back-home-button"}(e||(e={}));const t=e,n=(e,n)=>{if(!document.querySelector(t.toast)){const c=`<span>${e}</span>`;M.toast({html:c}),document.querySelector(t.toast).style.backgroundColor=n}};class c{listnerSearchButton(e){const c=document.querySelector(t.searchButton),r=document.querySelector(t.searchInput);null==c||c.addEventListener("click",(()=>{const{value:t}=r,c=(e=>{const t="http";return e?e.toLowerCase().includes(t)?(console.log(t),(e=>{if(!e)return null;const t=e.match(/^(?:https?:\/\/)?(?:www\.)?([^/]+)/);return t?t[1]:null})(e)):(console.log(e),(e=>{if(!e)return null;const t=e.match(/^(?!.*_)([\wа-яА-ЯёЁ]([\wа-яА-ЯёЁ-]*[\wа-яА-ЯёЁ])*\.)+(?!.*\d)[\wа-яА-ЯёЁ]{2,63}$/i);return t?t[0]:null})(e)):null})(t);c?e(c):n("Неверно введён домен","orange")}))}updateFrame(e){document.querySelector(t.iFrame).src=`https://${e}`}listnerBackHomeButton(e){document.querySelector(t.backHomeButton).addEventListener("click",(()=>{e()}))}}class r{constructor(){this.proxyUrl="https://cors-anywhere.herokuapp.com/",this.baseProtocol="https://"}checkApi(e){return t=this,n=void 0,r=function*(){return 200===(yield fetch(`${this.proxyUrl}${this.baseProtocol}${e}`)).status},new((c=void 0)||(c=Promise))((function(e,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof c?n:new c((function(e){e(n)}))).then(o,a)}s((r=r.apply(t,n||[])).next())}));var t,n,c,r}}class i{constructor(){this.api=new r}checkApi(e){return t=this,n=void 0,r=function*(){return yield this.api.checkApi(e)},new((c=void 0)||(c=Promise))((function(e,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof c?n:new c((function(e){e(n)}))).then(o,a)}s((r=r.apply(t,n||[])).next())}));var t,n,c,r}}(new class{constructor(){this.getSearchValue=e=>{this.checkApi(e)},this.backToHomePage=()=>{this.view.updateFrame(this.baseUrl)},this.baseUrl="autoparus.com",this.view=new c,this.model=new i,this.view.listnerBackHomeButton(this.backToHomePage)}initApp(){this.view.listnerSearchButton(this.getSearchValue)}checkApi(e=this.baseUrl){return c=this,r=void 0,o=function*(){(()=>{const e=document.querySelector(t.mainWrapper),n=document.createElement("div");n.className="loader-wrapper",n.innerHTML='\n  <div class="preloader-wrapper big active">\n    <div class="spinner-layer spinner-blue-only">\n      <div class="circle-clipper left">\n        <div class="circle"></div>\n      </div><div class="gap-patch">\n        <div class="circle"></div>\n      </div><div class="circle-clipper right">\n        <div class="circle"></div>\n      </div>\n    </div>\n  </div>',e.appendChild(n)})(),(yield this.model.checkApi(e))?this.view.updateFrame(e):n("Такого домена не существует","red"),document.querySelector(".loader-wrapper").remove()},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var c;t.done?e(t.value):(c=t.value,c instanceof i?c:new i((function(e){e(c)}))).then(n,a)}s((o=o.apply(c,r||[])).next())}));var c,r,i,o}}).initApp()})();